{"version":3,"sources":["../../src/scripts/scripts.js"],"names":["helper","class","has","classList","contains","className","indexOf","add","remove","replace","substr","length","toggle","event","addListener","addEventListener","attachEvent","removeEventListener","detachEvent","ready","document","readyState","tab","show","target","srcElement","href","preventDefault","history","replaceState","dataset","showByName","getElementById","getElementsByTagName","childNodes","nodeType","window","setTimeout","scrollTo","track","pageview","_paq","location","hash","push","init","createElement","type","async","defer","src","parentNode","insertBefore","form","validate","ajaxPost","action","XMLHttpRequest","encodeURIComponent","value","referrer","open","setRequestHeader","onload","bind","send","getAttribute","onsubmit"],"mappings":"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","file":"scripts.js","sourcesContent":["\"use strict\";\n/* common helper functions */\n\nvar helper = {};\n\nhelper.class = {\n  has: function (element, className) {\n    if (!element) {\n      return false;\n    }\n\n    if (element.classList && typeof element.classList.contains == \"function\") {\n      return element.classList.contains(className);\n    }\n\n    if (typeof element.className === \"undefined\") {\n      return false;\n    }\n\n    var classes = ' ' + element.className + ' ';\n    return classes.indexOf(className) >= 0;\n  },\n\n  add: function (element, className) {\n    if (!element) {\n      return;\n    }\n\n    if (element.classList && typeof element.classList.add == \"function\") {\n      element.classList.add(className);\n      return;\n    }\n\n    if (typeof element.className === \"undefined\") {\n      element.className = className;\n      return;\n    }\n    if (!helper.class.has(element, className)) {\n      element.className += ' ' + className;\n    }\n  },\n\n  remove: function (element, className) {\n    if (!element) {\n      return;\n    }\n\n    if (element.classList && typeof element.classList.remove == \"function\") {\n      element.classList.remove(className);\n      return;\n    }\n\n    if (typeof element.className === \"undefined\") {\n      return;\n    }\n\n    var classes = ' ' + element.className + ' ';\n    classes = classes.replace(' ' + className + ' ', ' ');\n    element.className = classes.substr(1, classes.length - 2);\n  },\n\n  toggle: function (element, className) {\n    if (!element) {\n      return;\n    }\n\n    if (element.classList && typeof element.classList.toggle == \"function\") {\n      element.classList.toggle(className);\n      return;\n    }\n\n    if (typeof element.className === \"undefined\") {\n      return;\n    }\n\n    if (helper.class.has(element, className)) {\n      helper.class.remove(element, className);\n    } else {\n      helper.class.add(element, className);\n    }\n  }\n};\n\n\nhelper.event = {\n  addListener: function (element, event, handler) {\n    if (!element) {\n      return;\n    }\n    if (element.addEventListener) {\n      element.addEventListener(event, handler, false);\n      return;\n    }\n    element.attachEvent('on' + event, handler);\n  },\n\n  remove: function ready(element, event, handler) {\n    if (!element) {\n      return;\n    }\n    if (element.removeEventListener) {\n      element.removeEventListener(event, handler, false);\n      return;\n    }\n    element.detachEvent('on' + event, handler);\n  },\n\n  ready: function ready(fn) {\n    if (document.addEventListener) {\n      document.addEventListener('DOMContentLoaded', fn);\n    } else {\n      document.attachEvent('onreadystatechange', function () {\n        if (document.readyState === 'interactive') {\n          fn();\n        }\n      });\n    }\n  }\n};\n\nhelper.tab = {\n  show : function(e) {\n    var scrolltotop = true,\n      idtoshow = '',\n      target = e.target || e.srcElement;\n    if (target) {\n      if (target.href) {\n        e.preventDefault();\n        history.replaceState({}, '', target.href);\n        scrolltotop = false;\n      }\n      if (target.dataset && target.dataset.tab) {\n        idtoshow = e.target.dataset.tab;\n      } else {\n        return;\n      }\n    }\n    helper.tab.showByName(idtoshow,target,scrolltotop);\n  },\n\n  showByName : function(idtoshow,target,scrollto) {\n    var i=0,\n      lis = document.getElementById('tablist').getElementsByTagName('a'),\n      tabs = document.getElementById('tabcontainer').childNodes,\n      eltoshow = document.getElementById(idtoshow);\n    for (i=0; i<lis.length; i++) {\n      if (lis[i].nodeType===1) {\n        helper.class.remove(lis[i],'active');\n      }\n    }\n    for (i=0; i<tabs.length; i++) {\n      if(tabs[i].nodeType===1){\n        helper.class.add(tabs[i],'hidden');\n        helper.class.add(tabs[i],'fadetext');\n      }\n    }\n    helper.class.remove(eltoshow,'hidden');\n    window.setTimeout(function(){\n      if (scrollto) {window.scrollTo(0,0);}\n      helper.class.remove(eltoshow,'fadetext')\n    },5);\n    helper.class.add(target,'active');\n    /* Sonderfall Kontakt/AGB */\n    if (idtoshow==='kontakt'){\n      helper.class.remove(document.getElementById('agb'),'hidden');\n      helper.class.remove(document.getElementById('kontaktformular'),'hidden');\n    } else {\n      helper.class.add(document.getElementById('agb'),'hidden');\n      helper.class.add(document.getElementById('kontaktformular'),'hidden');\n    }\n    helper.track.pageview(idtoshow);\n  }\n}\n\nhelper.track = {\n  pageview : function(pageid) {\n    if (window._paq) {\n      var fragId = pageid || window.location.hash.substr(1);\n      _paq.push(['setGenerationTimeMs', 0]);\n      _paq.push(['setCustomUrl', '/' + fragId]);\n      _paq.push(['setDocumentTitle', fragId]);\n      _paq.push(['trackPageView']);\n    }\n  },\n  init: function() {\n    var _paq = _paq || [];\n    _paq.push(['trackPageView']);\n    _paq.push(['enableLinkTracking']);\n    (function() {\n      var u=\"//piwik.kleiderordnung-duesseldorf.de/\";\n      _paq.push(['setTrackerUrl', u+'js/']);\n      _paq.push(['setSiteId', '1']);\n      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];\n      g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'js/'; s.parentNode.insertBefore(g,s);\n    })();\n  }\n}\n\n\nhelper.form = {\n  validate : function(e) {\n    /* TODO assure required fields or return false */\n    return true;\n  },\n  ajaxPost : function(form, callback) {\n    var url = form.action,\n      xhr = new XMLHttpRequest();\n\n    /* only allow known form fields */\n    var params=''+\n      'Name='+encodeURIComponent(document.getElementById('Name').value)+\n      '&E-Mail='+encodeURIComponent(document.getElementById('E-Mail').value)+\n      '&Telefon='+encodeURIComponent(document.getElementById('Telefon').value)+\n      '&Nachricht='+encodeURIComponent(document.getElementById('Nachricht').value)+\n      '&captcha='+encodeURIComponent(document.getElementById('captchafield').value);\n    if(document.referrer){params+='Referrer='+encodeURIComponent(document.referrer)}\n    xhr.open(\"POST\", url);\n    xhr.setRequestHeader(\"Accept\", \"application/json\");\n    xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n    xhr.setRequestHeader(\"X-Requested-With\", \"xmlhttprequest\");\n\n    //.bind ensures that this inside of the function is the XHR object.\n    xhr.onload = callback.bind(xhr);\n\n    //All preperations are clear, send the request!\n    xhr.send(params);\n  }\n}\n\n/* attach link handlers for nice tab navigation effect */\n/* TODO wirklich barrierefrei sollte der Tabbereich initial ausgeklappt sein\n und dann erst mit modernem JavaScript die Event Handler und initial hidden Styles bekommen */\n/* TODO Redundanzen beseitigen und häufig verwendete Elemente / IDs dauerhaft speichern */\nhelper.event.ready(function(){\n  /* Ankernavigation berücksichtigen d.h. z.B. /#kontakt muss Reiter Kontakt öffnen */\n  if (location.hash && location.hash!=\"\"){\n    var scrollto = true;\n    var tab = location.hash.substr(1);\n    /* AGB befinden sich auch im Reiter Kontakt */\n    if (tab==='agb'){tab='kontakt';scrollto=false;}\n    var target = document.getElementById(\"link-\"+tab);\n    if (target) {\n      helper.tab.showByName(tab,target,scrollto);\n    }\n  }\n  helper.event.addListener(document.getElementById('tablist'),'click',helper.tab.show);\n  /* Handler für Links zu Impressum / Kontakt / AGB außerhalb der Tablinks */\n  helper.event.addListener(document.getElementById('showcontact'),'click',function(e){\n      var scrollto = true;\n      var caller = e.target || e.srcElement;\n      if (caller && caller.getAttribute('href')==='#agb') {scrollto=false;}\n      var target = document.getElementById(\"link-kontakt\");\n      if (target) {\n        helper.tab.showByName(\"kontakt\",target,scrollto);\n      }\n    }\n  );\n\n  var contactform = document.getElementById('kontaktformular');\n  /* submit by AJAX - TODO just leave default for elderly browsers */\n  contactform.onsubmit = function(e) {\n    e.preventDefault();\n    document.getElementById('form-referrer').value=document.referrer;\n    helper.form.ajaxPost(contactform,function(xhr){\n        if (xhr) {/* TODO properly check success */\n          helper.class.remove(document.getElementById('formularversandt'), 'hidden');\n          helper.class.add(document.getElementById('formularfelder'), 'hidden');\n        }\n      }\n    );\n  };\n\n  helper.track.init();\n\n  /* TODO make available offline as a progressive web app\n   https://developers.google.com/web/fundamentals/getting-started/codelabs/offline/\n   */\n});\n"]}